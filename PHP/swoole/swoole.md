### swoole的基本知识点
- 前置知识点
  - 进程
    - 应用程序启动的实例：例如打开一个软件就启动了一个进程
    - 进程拥有代码和打开的文件资源，独立空间

  - 线程
    - 线程属于进程，是程序的执行者
    - 一个进程至少包含一个主线程，也可以有更多的子线程
    - 线程两种调度策略
      - 分时调度
      - 抢占式调度

  - 协程
    - 轻量级线程，协程的创建，切换，挂起，销毁全部为内存操作，消耗低
    - 协程属于线程，是在线程里面执行的
    - 协程的调度是用户手动切换，所以又叫用户空间线程
    - 协程的调度策略
      - 协作式调度
  
  - 并发与并行
    - 并发
      - 处理多个同时活动的能力
    - 并行
      - 同一时刻发生两个并发事件
    - 区别
      - 并发是指程序的结构，并行是指程序运行时的状态
      - 并行一定是并发，并行是并发设计的一种
      - 单线程永远无法达到并行状态

  - 迭代器与生成器
    - 迭代器
      - PHP内置的Iterator迭代器接口，所以如果定义了一个类并实现了Iterator接口，那么这个类对象就是可迭代的`ZEND_ITER_OBJECT`，否则是`ZEND_ITER_PLAIN_OBJECT`
      - 对于`ZEND_ITER_PLAIN_OBJECT`的类对象，`foreach`会获取该对象的默认属性数组，然后对该数组进行迭代
      - 而对于`ZEND_ITER_OBJECT`的类对象，则会通过调用对象实现的`Iterator`接口相关函数来进行迭代
      - 任何实现了`Iterator`接口的类都可以迭代，即可以用`foreach`来进行遍历
      - `Iterator`接口
        ```PHP
          interface Iterator extends Traversable
          {
            // 获取当前内部标量指向的元素的数据
              public mixed current()
            // 获取当前标量
              public scalar key()
            // 移动到下一个标量
              public void next()
            // 重置标量
              public void rewind()
            // 检查当前标量是否有效
              public boolean valid()
          }
        ```
    - 生成器
      - 虽然迭代器仅需继承接口即可实现，但是毕竟需要定义一整个类然后实现接口的所有方法，不方便。生成器则提供了一个简单的方式来实现简单的对象迭代，相比`Iterator`的方式性能开销和复杂度降低
      - 生成器允许在`foreach`代码中迭代一组数据而不需要创建任何数组。使用`yield`关键字
      - `send`方法，就是向`yield`传递一个值，同时从`yield`语句处执行，直到再次遇到`yield`后控制权回到外部



- 进程的三态模型：多道程序中，进程在处理器上交替运行，状态不断发生变化
  - 运行
    - 当一个进程在处理机上运行时，则称该进程处于运行状态
    - 处于此状态的程序运行数目小于或者等于处理器数目
    - 对于单处理机系统，处于运行状态的进程只有一个。
    - 在没有其他进程可以执行时（如所有进程都处于阻塞状态），通常会执行系统中的空闲进程
  - 就绪
    - 当一个进程，获得了处理机以外的一切所需资源，一旦得到处理机即可运行，则称此状态处于就绪状态
    - 就绪状态可以按多个优先级进行划分队列。例如：
      - 当一个进程由于时间片用完而进入就绪状态，排入低优先级队列
      - 当进程由I/O操作完成而进入就绪状态时，排入高优先级队列
  - 阻塞
    - 一个进程正在等待某一事件发生（例如请求I/O而等待I/O完成等）而暂时停止执行，这时即使把处理机分配给进程也无法执行，故称该进程处于阻塞状态，也称等待或睡眠状态

- 进程的五态模型：对于一个实际的系统，进程的状态及其转换更为复杂
  - 新建态
    - 对应于进行刚刚被创建时没有被提交的状态，并等待系统完成创建进程的所有必要信息（既是刚刚新建，还没有交给系统）
  - 活跃就绪/静止就绪
    - 活跃就绪：是指进程在主存（内存）并且可被调度的状态
    - 静止就绪（挂起就绪）：是指进程被对换到辅存时的就绪状态，是不能被直接调度的状态，只有当主存中没有活跃的就绪态进程，或者是挂起就绪态进程具有更高优先级，系统将把挂起就绪态进程调回主存并转换为活跃就绪
  - 运行
  - 活跃阻塞/禁止阻塞
    - 活跃阻塞：是指进程已在主存，一旦等待的事件产生便进入活跃就绪状态
    - 静止阻塞：进程被对换到辅存时的阻塞状态，一旦等待的事件产生便进入静止就绪状态
  - 终止态
    - 进程已经结束运行，回收除进程控制块以外的其他资源，并让其他进程在控制块中收集有关信息

- 线程
  - 是进程中的一个实体，是被系统调度和分派的基本单位
  - 线程自己不拥有系统资源，只拥有一点儿在运行中必不可少的资源
  - 可与同属一个进程的其他线程共享进程所拥有的全部资源
  - 一个线程可以创建和撤销另一个线程
  - 同一个进程中的多个线程可以并发执行
  - 线程是程序中一个单一的顺序控制流程
  - 进程内一个相对独立的，可调度的执行单元，是系统独立调度和分派CPU的基本单位指运行中的程序的调度单位
  - 在单个程序中同时运行多个线程完成不同的工作，称为多线程
  - 每一个程序都至少yong'you一个线程，若只有一个线程，那就是程序本身

- 线程的状态
  - 就绪：线程具备运行的所有条件，逻辑上可以运行，在等待处理机
  - 阻塞：线程在等待一个事件（如某个信号量），逻辑上不可执行
  - 运行：线程占用处理机正在运行

- 协程
  - 是一种用户态的轻量级线程，协程的调度完全由用户控制
  - 协程拥有自己的寄存器上下文和栈
  - 协程调度切换时，将寄存器上下文和栈保存到其他地方，在切换回来时，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销
  - 可以不加锁的访问全局变量，所以上下文的切换非常快

- 线程和进程区别
  - 线程是进程的一个执行单元，进程内至少有一个线程，它们共享进程的地址空间，而进程有自己独立的地址空间
  - 进程是资源分配和拥有的单元，同一个进程内的线程共享进程的资源
  - 线程是处理器调度的基本单位，进程不是
  - 两者都可以进程并发执行
  - 每一个独立的线程有一个程序运行入口、顺序执行序列和程序的出口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制

- 线程和协程的区别
  - 一个线程可以拥有多个协程，一个进程也可以单独拥有多个协程
  - 线程和进程都是同步机制，而协程是异步
  - 协程能保留上一次的调用时的状态，每次过程重入时，就相当于进入到上一次调用的状态

- 多线程、多进程
  - 多进程
    - 同一时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态，就是多进程
    - 多开一个进程就会多分配一份资源，进程间的通讯不方便
  - 多线程
    - 线程就是把一个进程分为很多片，每一片都可以是一个独立的流程
    - 与多进程区别是只会使用一个进程资源，线程间可以直接通信